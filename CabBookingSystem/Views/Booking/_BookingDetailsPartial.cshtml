@model CabBookingSystem.Models.Booking

<div class="booking-details">
    <h6 class="text-primary">Booking #@Model.Id</h6>

    <div class="row mt-3">
        <div class="col-md-6">
            <p><strong>📍 Pickup:</strong><br>@Model.PickupLocation</p>
            <p><strong>🎯 Dropoff:</strong><br>@Model.DropoffLocation</p>
            <p><strong>📏 Distance:</strong> @Model.Distance.ToString("F2") km</p>
        </div>
        <div class="col-md-6">
            <p><strong>💰 Fare:</strong> ₹@Model.Fare.ToString("F2")</p>
            <p><strong>🚗 Cab Type:</strong> @(Model.Cab?.Type.ToString() ?? "Unknown")</p>
            <p><strong>📊 Status:</strong> <span class="badge bg-@GetStatusBadgeColor(Model.Status)">@Model.Status</span></p>
        </div>
    </div>

    <div class="mt-3">
        <p><strong>🕒 Booking Time:</strong> @Model.BookingTime.ToString("f")</p>
    </div>

    @if (Model.Status == BookingStatus.Pending || Model.Status == BookingStatus.Confirmed)
    {
        <div class="mt-3">
            <form method="post" asp-controller="Booking" asp-action="CancelBooking">
                <input type="hidden" name="id" value="@Model.Id" />
                <button type="submit" class="btn btn-warning btn-sm">
                    🚫 Cancel Booking
                </button>
            </form>
        </div>
    }
</div>

@functions {
    private string GetStatusBadgeColor(BookingStatus status)
    {
        return status switch
        {
            BookingStatus.Completed => "success",
            BookingStatus.InProgress => "primary",
            BookingStatus.Confirmed => "info",
            BookingStatus.Cancelled => "danger",
            _ => "warning"
        };
    }
}